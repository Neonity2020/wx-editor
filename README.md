# 微信公众号编辑器

一个基于 Electron + Vite + React 的现代化微信公众号编辑器，具有优雅的 Bear 笔记风格设计。

## ✨ 功能特性

### 🎨 编辑器功能
- **富文本编辑**: 基于 TipTap 框架的强大编辑器
- **Markdown 支持**: 支持 Markdown 语法和快捷键
- **图片上传**: 支持图片粘贴自动上传到图床（PicGo）
- **主题切换**: 多种预设主题，一键切换文章样式
- **实时预览**: 支持实时预览文章效果
- **导出功能**: 支持导出为 HTML 文件

### 📚 文章管理
- **本地数据库**: 使用 IndexedDB 本地存储文章
- **文章列表**: 管理所有已编辑的文章
- **搜索功能**: 按标题搜索文章
- **标签系统**: 为文章添加标签，支持标签筛选
- **发布状态**: 区分草稿和已发布文章
- **导入导出**: 支持文章数据的导入导出

### 🎯 用户体验
- **Bear 风格设计**: 简洁优雅的界面设计
- **响应式布局**: 适配不同屏幕尺寸
- **快捷键支持**: 丰富的编辑快捷键
- **自动保存**: 文章内容自动保存
- **多主题支持**: 多种预设主题可选

## 🚀 快速开始

### 环境要求
- Node.js 16+
- npm 或 yarn

### 安装依赖
```bash
npm install
```

### 开发模式
```bash
# 启动开发服务器
npm run dev

# 启动 Electron 应用
npm run electron
```

### 构建应用
```bash
# 构建 Web 版本
npm run build

# 构建 Electron 应用
npm run electron:build
```

## 📖 使用指南

### 基本编辑
1. **新建文章**: 点击"新建文章"按钮或使用快捷键 `Ctrl+N`
2. **编辑内容**: 在编辑器中输入内容，支持 Markdown 语法
3. **保存文章**: 点击"保存"按钮或使用快捷键 `Ctrl+S`
4. **预览效果**: 点击"显示预览"查看最终效果

### 图片上传
1. **配置 PicGo**: 在设置中配置 PicGo 服务器地址
2. **粘贴图片**: 直接粘贴图片到编辑器中
3. **自动上传**: 图片会自动上传到配置的图床

### 文章管理
1. **查看列表**: 在左侧文章管理面板查看所有文章
2. **搜索文章**: 使用搜索框按标题搜索文章
3. **标签管理**: 在文章详情中添加和管理标签
4. **发布状态**: 设置文章为草稿或已发布状态

### 主题切换
1. **选择主题**: 在顶部工具栏选择预设主题
2. **实时预览**: 主题效果会实时应用到编辑器和预览区域
3. **自定义主题**: 可以在 `src/themes/index.ts` 中添加自定义主题

## 🛠️ 技术栈

- **前端框架**: React 18 + TypeScript
- **构建工具**: Vite
- **桌面应用**: Electron
- **编辑器**: TipTap
- **样式**: Tailwind CSS
- **数据库**: IndexedDB (idb)
- **图标**: Lucide React

## 📁 项目结构

```
wxeditor/
├── electron/           # Electron 主进程和预加载脚本
├── src/
│   ├── components/     # React 组件
│   │   ├── Editor.tsx           # 富文本编辑器
│   │   ├── ArticleManager.tsx   # 文章管理组件
│   │   ├── TagManager.tsx       # 标签管理组件
│   │   └── ThemeSelector.tsx    # 主题选择器
│   ├── services/       # 服务层
│   │   ├── database.ts          # 数据库服务
│   │   └── imageUpload.ts       # 图片上传服务
│   ├── themes/         # 主题配置
│   └── App.tsx         # 主应用组件
├── package.json
└── README.md
```

## 🎨 主题系统

编辑器支持多种预设主题，每个主题都包含完整的 CSS 样式：

- **默认主题**: 简洁的默认样式
- **暗色主题**: 深色背景的护眼主题
- **科技主题**: 科技感十足的蓝色主题
- **温暖主题**: 温暖的橙色主题

### 日间主题
- **默认主题** - 简洁清晰的默认样式
- **Bear主题** - Bear笔记风格，优雅美观
- **优雅主题** - 优雅的阅读体验
- **现代主题** - 现代简约风格
- **微信风格** - 微信公众号专用样式

### 夜间主题 🌙
- **夜间模式** - 护眼的夜间阅读模式
- **Bear夜间主题** - Bear笔记夜间风格，护眼舒适
- **现代夜间主题** - 现代简约夜间风格
- **优雅夜间主题** - 优雅的夜间阅读体验
- **微信夜间主题** - 微信公众号夜间专用样式

## 🔧 配置说明

### PicGo 配置
在设置面板中配置 PicGo 服务器：
- **服务器地址**: 默认为 `http://127.0.0.1:36677`
- **Token**: 可选的认证令牌

### 数据库配置
编辑器使用 IndexedDB 本地存储，无需额外配置：
- **数据库名**: `wxeditor-db`
- **版本**: 1.0
- **存储**: 文章数据、标签、主题等

## 📝 快捷键

| 功能 | 快捷键 |
|------|--------|
| 新建文章 | Ctrl+N |
| 保存文章 | Ctrl+S |
| 加粗 | Ctrl+B |
| 斜体 | Ctrl+I |
| 下划线 | Ctrl+U |
| 删除线 | Ctrl+Shift+X |
| 插入链接 | Ctrl+K |
| 插入图片 | Ctrl+Shift+I |
| 撤销 | Ctrl+Z |
| 重做 | Ctrl+Y |

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

- [TipTap](https://tiptap.dev/) - 优秀的富文本编辑器框架
- [Bear](https://bear.app/) - 设计灵感来源
- [Tailwind CSS](https://tailwindcss.com/) - 优秀的 CSS 框架
- [Lucide](https://lucide.dev/) - 精美的图标库

## 图片功能使用说明

### 复制粘贴图片
1. 复制任意图片到剪贴板（Ctrl+C 或右键复制）
2. 在编辑器中按 Ctrl+V 粘贴
3. 图片会自动上传并插入到编辑器中

### 图片管理器
1. 点击工具栏中的文件夹图标打开图片管理器
2. 查看所有缓存的图片
3. 点击眼睛图标可以重新插入图片到编辑器
4. 点击垃圾桶图标删除不需要的图片
5. 使用"清理过期图片"功能自动清理旧图片

### 图片缓存
- 所有上传的图片都会自动缓存到浏览器的IndexedDB数据库中
- 缓存数据会持久保存，关闭浏览器后仍然可用
- 系统会自动清理最久未使用的图片，保持缓存大小合理

## 夜间模式特色

夜间模式主题专为夜间使用设计，具有以下特点：

- 🌙 **护眼配色** - 使用深色背景和柔和的文字颜色
- 🎨 **主题适配** - 整个界面包括工具栏、侧边栏等都适配夜间模式
- 📱 **响应式设计** - 在不同设备上都有良好的显示效果
- 🔧 **完整功能** - 所有编辑功能在夜间模式下都能正常使用

### 夜间主题对比

| 主题名称 | 背景色 | 文字色 | 特色 |
|---------|--------|--------|------|
| 夜间模式 | 深蓝灰 | 浅灰白 | 经典护眼配色 |
| Bear夜间主题 | 深灰黑 | 浅灰白 | Bear风格红色强调 |
| 现代夜间主题 | 深蓝黑 | 浅蓝白 | 现代渐变效果 |
| 优雅夜间主题 | 深灰黑 | 浅灰白 | 优雅字体排版 |
| 微信夜间主题 | 深灰黑 | 浅灰白 | 微信绿色强调 |
